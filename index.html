<!doctype html>
<html lang="en" data-theme="system">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Bridges Park</title>

<style>
  :root{
    --bg:#070a0f;
    --text:#e5e7eb;
    --muted:#9aa3b2;

    --card:rgba(17,21,27,.82);
    --border:rgba(255,255,255,.12);
    --shadow:0 16px 34px rgba(0,0,0,.28);
    --shadow2:0 10px 20px rgba(0,0,0,.22);

    --accent:#9ED37A;
    --accentSoft:rgba(158,211,122,.18);
    --accentBorder:rgba(158,211,122,.40);

    --controlBg:rgba(27,34,48,.72);
    --controlBg2:rgba(27,34,48,.56);

    --thead:rgba(23,28,36,.78);
    --rowBg:rgba(17,21,27,.72);
    --rowBorder:rgba(255,255,255,.12);
    --totalRow:rgba(27,35,65,.60);

    --progressTrack:rgba(255,255,255,.12);
    --progressFill:var(--accent);

    --underBg:rgba(16,185,129,.20);
    --evenBg:rgba(148,163,184,.18);
    --overBg:rgba(244,63,94,.18);

    --toastBg: rgba(10,12,16,0.92);
    --toastText:#fff;
  }

  html[data-theme="light"]{
    color-scheme:light;

    --bg:#f6f7fb;
    --text:#0f172a;
    --muted:#64748b;

    --card:rgba(255,255,255,.88);
    --border:rgba(15,23,42,.12);

    --accent:#8FBC6C;
    --accentSoft:rgba(143,188,108,.16);
    --accentBorder:rgba(143,188,108,.34);

    --controlBg:rgba(255,255,255,.84);
    --controlBg2:rgba(255,255,255,.66);

    --thead:rgba(255,255,255,.76);
    --rowBg:rgba(255,255,255,.68);
    --rowBorder:rgba(15,23,42,.12);
    --totalRow:rgba(143,188,108,.20);

    --progressTrack:rgba(15,23,42,.10);

    --shadow:0 16px 34px rgba(2,6,23,.12);
    --shadow2:0 10px 20px rgba(2,6,23,.10);

    --toastBg: rgba(15,23,42,0.92);
  }

  html[data-theme="dark"]{ color-scheme:dark; }

  html, body{ height:100%; }
  html, body{ background:var(--bg); }
  *{ box-sizing:border-box; }

  body{
    margin:0;
    position:relative;        /* important for iOS background fix */
    background:transparent;   /* background comes from body::before */
    padding:max(14px,env(safe-area-inset-top)) 16px max(18px,env(safe-area-inset-bottom)) 16px;
    font-family:-apple-system,system-ui,sans-serif;
    color:var(--text);
    line-height:1.25;
  }

  /* Premium background (iOS Safari-safe; prevents "dark slab" sliding) */
  body::before{
    content:"";
    position:fixed;
    inset:-120px 0 0 0; /* extra above so it never "cuts off" */
    z-index:-1;
    pointer-events:none;

    transform: translate3d(0,0,0);
    will-change: transform;

    background:
      radial-gradient(900px 520px at 12% -10%, rgba(158,211,122,.28), transparent 60%),
      radial-gradient(760px 520px at 92% 18%, rgba(90,130,255,.16), transparent 62%),
      radial-gradient(700px 500px at 40% 105%, rgba(244,63,94,.10), transparent 60%),
      radial-gradient(1200px 700px at 50% 40%, rgba(255,255,255,.06), transparent 60%),
      linear-gradient(180deg, rgba(0,0,0,.22), transparent 35%, rgba(0,0,0,.20)),
      repeating-linear-gradient(135deg, rgba(255,255,255,.02) 0 2px, transparent 2px 6px),
      var(--bg);
  }

  .control{
    border-radius:18px;
    border:1px solid var(--border);
    background:var(--controlBg);
    box-shadow:var(--shadow2);
    -webkit-backdrop-filter: blur(12px);
    backdrop-filter: blur(12px);
  }

  /* ===== Header ===== */
  .header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
  }
  .headerLeft{
    display:flex;
    align-items:center;
    gap:12px;
    flex:1;
    min-width:0;
  }
  .logoImg{
    width:56px; height:56px;
    object-fit:contain;
    display:block;
    border:none !important;
    outline:none !important;
    box-shadow:none !important;
    background:transparent;
    border-radius:14px;
    flex:0 0 auto;
  }
  .brand h1{
    margin:0;
    font-size:34px;
    font-weight:950;
    letter-spacing:-.6px;
    line-height:1.02;
  }
  .subtitle{
    margin-top:4px;
    color:var(--muted);
    font-size:13px;
    letter-spacing:-.1px;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:clip; /* no ellipsis */
  }

  .themeToggleBtn{
    width:52px; height:52px;
    padding:0;
    display:flex;
    align-items:center;
    justify-content:center;
    cursor:pointer;
  }
  .themeToggleBtn img{ width:24px; height:24px; display:block; }

  /* ===== Info ===== */
  .infoGrid{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:12px;
    margin-top:14px;
  }
  .infoCard{ padding:14px; }
  .infoLabel{ margin:0; font-size:12px; color:var(--muted); }
  .infoValue{
    margin:6px 0 0 0;
    font-size:22px;
    font-weight:950;
    letter-spacing:-.3px;
  }

  /* ===== Legend ===== */
  .legend{
    display:flex;
    gap:14px;
    flex-wrap:wrap;
    margin-top:12px;
    user-select:none;
  }
  .swatch{
    display:inline-flex;
    align-items:center;
    gap:9px;
    color:var(--muted);
    font-size:13px;
  }
  .dot{
    width:10px; height:10px;
    border-radius:999px;
    border:1px solid var(--border);
  }
  .dot-under{ background:var(--underBg); }
  .dot-even{ background:var(--evenBg); }
  .dot-over{ background:var(--overBg); }

  /* ===== Buttons ===== */
  button{
    width:100%;
    padding:16px;
    font-size:17px;
    font-weight:950;
    letter-spacing:-.2px;
    color:var(--text);
    border:1px solid var(--border);
    background:var(--controlBg);
    cursor:pointer;
    transition: transform .10s ease;
    -webkit-backdrop-filter: blur(12px);
    backdrop-filter: blur(12px);
    border-radius:18px;
  }
  button:active{ transform:scale(.985); }
  button:focus{ outline:none; }

  #btnGen{
    margin-top:12px;
    background:
      linear-gradient(180deg,rgba(255,255,255,.18),transparent),
      radial-gradient(1100px 160px at 50% 0%,rgba(158,211,122,.22),transparent),
      var(--controlBg);
    border-color: var(--accentBorder);
    box-shadow: var(--shadow);
  }

  .btnRowTwo{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:12px;
    margin-top:12px;
  }
  .btnSecondary{
    background:var(--controlBg2);
    font-size:15px;
    font-weight:900;
    padding:15px 12px;
  }

  /* ===== Names ===== */
  .nameBlock{ margin-top:12px; padding:12px; }
  .row{ display:flex; gap:12px; flex-wrap:wrap; }
  .grow{ flex:1 1 160px; }

  input[type=text]{
    width:100%;
    padding:15px 14px;
    font-size:16px;
    font-weight:850;
    letter-spacing:-.2px;
    border-radius:16px;
    border:1px solid var(--border);
    background:rgba(255,255,255,.06);
    color:var(--text);
  }

  /* ===== Scorecard ===== */
  .cardOuter{ margin-top:14px; overflow:visible; }

  .scoreSticky{
    position:sticky;
    top:8px;
    z-index:60;
    padding:0;
    background:transparent;
    border:none;
    box-shadow:none;
  }
  .scoreStickyInner{
    padding:12px;
    background:var(--card);
    border:1px solid var(--border);
    border-radius:18px;
    box-shadow:var(--shadow2);
    -webkit-backdrop-filter: blur(12px);
    backdrop-filter: blur(12px);
  }

  /* Slightly more room for P1/P2 */
  .colHeader{
    display:grid;
    grid-template-columns:10% 32% 10% 24% 24%;
    align-items:center;
    padding:14px 10px;
    background:var(--thead);
    border:1px solid var(--border);
    border-radius:18px;
    font-weight:950;
    letter-spacing:-.2px;
  }
  .colHeader > div{ text-align:center; }

  /* Progress sits under headers and scrolls with sticky header */
  .progressWrap{
    display:flex;
    align-items:center;
    gap:10px;
    margin-top:12px;
  }
  .progressTrack{
    flex:1 1 auto;
    height:10px;
    border-radius:999px;
    background:var(--progressTrack);
    overflow:hidden;
    border:1px solid var(--border);
  }
  .progressFill{
    height:100%;
    width:0%;
    background:
      linear-gradient(90deg, rgba(255,255,255,0.18), rgba(255,255,255,0) 55%),
      var(--progressFill);
    transition: width .25s ease;
  }
  .progressText{
    min-width:86px;
    text-align:right;
    font-weight:900;
    color:var(--muted);
  }

  .cardInner{
    overflow:hidden;
    border-radius:18px;
  }
  .tablePad{ padding:0 12px 12px; }

  table{
    width:100%;
    border-collapse:separate;
    border-spacing:0 12px;
    table-layout:fixed;
    padding:0;
  }

  colgroup col:nth-child(1){ width:10%; }
  colgroup col:nth-child(2){ width:32%; }
  colgroup col:nth-child(3){ width:10%; }
  colgroup col:nth-child(4){ width:24%; }
  colgroup col:nth-child(5){ width:24%; }

  th, td{
    padding:14px 10px;
    text-align:center;
    white-space:nowrap;
    overflow:hidden;
  }

  tbody tr.holeRow td,
  tbody tr.sumRow td,
  tbody tr.sumRow th{
    background:var(--rowBg);
    border-top:1px solid var(--rowBorder);
    border-bottom:1px solid var(--rowBorder);
  }

  tbody tr.holeRow td:first-child,
  tbody tr.sumRow th:first-child{
    border-left:1px solid var(--rowBorder);
    border-top-left-radius:22px;
    border-bottom-left-radius:22px;
  }
  tbody tr.holeRow td:last-child,
  tbody tr.sumRow td:last-child{
    border-right:1px solid var(--rowBorder);
    border-top-right-radius:22px;
    border-bottom-right-radius:22px;
  }

  tbody tr.holeRow.active td{ background:var(--accentSoft); }
  tbody tr.holeRow.active td:first-child{ box-shadow: inset 6px 0 0 var(--accent); }

  .twoPip{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    gap:8px;
    width:100%;
  }
  .arrow{
    font-weight:950;
    color:rgba(148,163,184,.95);
    font-size:12px;
  }

  .goalTag{
    position:relative;
    height:20px;
    min-width:52px;
    padding:0 10px;
    border-radius:999px;
    font-size:11px;
    font-weight:950;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    border:1px solid rgba(255,255,255,.14);
    box-shadow: 0 1px 0 rgba(255,255,255,.10) inset, 0 10px 18px rgba(0,0,0,.10);
  }
  .goalTag::after{
    content:"";
    position:absolute;
    inset:0;
    border-radius:999px;
    background: linear-gradient(to bottom, rgba(255,255,255,0.22), rgba(255,255,255,0));
    opacity:0.33;
    pointer-events:none;
  }

  .goal-tee{ background:#0b0d10; color:#fff; border-color: rgba(255,255,255,.14); text-transform:lowercase; }
  .goal-white{ background:#fff; color:#111; border-color: rgba(0,0,0,.10); }
  .goal-blue{ background:#1f6feb; color:#fff; }
  .goal-orange{ background:#ff8a00; color:#111; border-color: rgba(0,0,0,.10); }
  .goal-pink{ background:#ff5aa5; color:#111; border-color: rgba(0,0,0,.10); }
  .goal-red{ background:#e11d48; color:#fff; }
  .goal-green{ background:#16a34a; color:#fff; }
  .goal-yellow{ background:#ffd400; color:#111; border-color: rgba(0,0,0,.10); }

  /* Score dropdowns (bigger + easier to tap) */
  tbody tr.holeRow td:nth-child(4),
  tbody tr.holeRow td:nth-child(5){
    padding-left:6px;
    padding-right:6px;
    overflow:visible; /* allow native control */
  }

  select.scoreSel{
    width:100%;
    max-width:74px;
    min-width:64px;
    height:40px;
    padding:10px 10px;
    border-radius:16px;

    border:1px solid var(--border);
    background:rgba(255,255,255,.08);
    color:var(--text);

    font-size:16px;
    font-weight:950;
    text-align:center;

    -webkit-appearance:auto;
    appearance:auto;
  }

  .score-under{ background:var(--underBg) !important; }
  .score-even{ background:var(--evenBg) !important; }
  .score-over{ background:var(--overBg) !important; }

  .sumCell{
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:5px;
    line-height:1.05;
  }
  .sumDiff{
    font-size:18px;
    font-weight:950;
    padding:4px 12px;
    border-radius:999px;
    border:1px solid var(--border);
    min-width:46px;
  }
  .sumThrows{
    font-size:11px;
    color:var(--muted);
    font-weight:900;
  }

  .left{ text-align:left; }

  tfoot tr.totalRow th,
  tfoot tr.totalRow td{
    background:var(--totalRow);
    border-top:1px solid var(--rowBorder);
    border-bottom:1px solid var(--rowBorder);
  }

  /* Toast */
  .toast{
    position:fixed;
    left:50%;
    bottom:18px;
    transform:translateX(-50%);
    background:var(--toastBg);
    color:var(--toastText);
    padding:10px 14px;
    border-radius:14px;
    opacity:0;
    pointer-events:none;
    transition: opacity .18s ease, transform .18s ease;
    z-index:9999;
    box-shadow: 0 14px 24px rgba(0,0,0,.25);
  }
  .toast.show{
    opacity:1;
    transform:translateX(-50%) translateY(-2px);
  }
</style>
</head>

<body>

<!-- Header -->
<div class="header">
  <div class="headerLeft">
    <img id="logoLight" class="logoImg" src="C542D141-EA75-4C1C-9345-50C8E08D9EE5.png" alt="Bridges Park logo" />
    <img id="logoDark" class="logoImg" src="B19327BB-FD35-4A0C-8F34-56CC91793687.png" alt="Bridges Park logo (dark)" style="display:none;" />
    <div class="brand">
      <h1>Bridges Park</h1>
      <div class="subtitle">Disc Golf • Course Generator + Scorecard</div>
    </div>
  </div>

  <button id="themeToggle" class="themeToggleBtn control" type="button" aria-label="Toggle theme">
    <img id="themeIcon" src="moon.png" alt="Theme icon" />
  </button>
</div>

<!-- Info -->
<div class="infoGrid">
  <div class="infoCard control">
    <div class="infoLabel">Holes</div>
    <div class="infoValue">18</div>
  </div>
  <div class="infoCard control">
    <div class="infoLabel">Par (Front / Back / Total)</div>
    <div class="infoValue">
      <span id="parFrontTop">–</span> /
      <span id="parBackTop">–</span> /
      <span id="parTotalTop">–</span>
    </div>
  </div>
</div>

<!-- Legend -->
<div class="legend">
  <div class="swatch"><span class="dot dot-under"></span> Under</div>
  <div class="swatch"><span class="dot dot-even"></span> Even</div>
  <div class="swatch"><span class="dot dot-over"></span> Over</div>
</div>

<!-- Buttons -->
<button id="btnGen" class="control" type="button">Generate New Course</button>

<div class="btnRowTwo">
  <button id="btnClear" class="btnSecondary control" type="button">Clear Scores</button>
  <button id="btnCopyLink" class="btnSecondary control" type="button">Copy Share Link</button>
</div>

<!-- Names -->
<div class="nameBlock control">
  <div class="row">
    <div class="grow"><input id="n1" type="text" placeholder="Player 1 name" /></div>
    <div class="grow"><input id="n2" type="text" placeholder="Player 2 name" /></div>
  </div>
</div>

<!-- Scorecard -->
<div class="cardOuter">
  <div class="scoreSticky">
    <div class="scoreStickyInner">
      <div class="colHeader" aria-hidden="true">
        <div>#</div>
        <div>Throw</div>
        <div>Par</div>
        <div id="p1HeadSticky">P1</div>
        <div id="p2HeadSticky">P2</div>
      </div>

      <div class="progressWrap">
        <div class="progressTrack"><div id="progressFill" class="progressFill"></div></div>
        <div id="progressText" class="progressText">1 / 18</div>
      </div>
    </div>
  </div>

  <div class="cardInner control" style="margin-top:12px;">
    <div class="tablePad">
      <table>
        <colgroup><col><col><col><col><col></colgroup>
        <thead style="display:none;">
          <tr><th>#</th><th>Throw</th><th>Par</th><th>P1</th><th>P2</th></tr>
        </thead>

        <tbody id="mainBody"></tbody>

        <tfoot>
          <tr id="backRow">
            <th colspan="2" class="left">Back 9</th>
            <th id="parBackCell">–</th>
            <th>
              <div class="sumCell">
                <span id="bd1" class="sumDiff">0</span>
                <span id="b1" class="sumThrows">0</span>
              </div>
            </th>
            <th>
              <div class="sumCell">
                <span id="bd2" class="sumDiff">0</span>
                <span id="b2" class="sumThrows">0</span>
              </div>
            </th>
          </tr>

          <tr class="totalRow">
            <th colspan="2" class="left">Total</th>
            <th id="parTotalCell">–</th>
            <th>
              <div class="sumCell">
                <span id="d1" class="sumDiff">0</span>
                <span id="t1" class="sumThrows">0</span>
              </div>
            </th>
            <th>
              <div class="sumCell">
                <span id="d2" class="sumDiff">0</span>
                <span id="t2" class="sumThrows">0</span>
              </div>
            </th>
          </tr>
        </tfoot>
      </table>
    </div>
  </div>
</div>

<div id="toast" class="toast">Saved</div>

<script src="app.js"></script>
</body>
</html>
